trigger:
- master

variables:
  UE_ROOT: 'C:\Program Files\Epic Games\UE_5.5'  # Update this path if needed
  PROJECT_PATH: '$(Build.SourcesDirectory)\TestCICD.uproject'
  BUILD_DIR: '$(Build.ArtifactStagingDirectory)\Build'
  PACKAGE_DIR: '$(Build.ArtifactStagingDirectory)\Package'

pool: unrealengine

stages:
- stage: pixel_streaming
  displayName: Enable Pixel Streaming
  jobs:
  - job: BuildJob
    steps:
    - task: UseDotNet@2
      inputs:
        packageType: 'runtime'
        version: '8.0.x'
        includePreviewVersions: false
    - script: |
        "%UE_ROOT%\Engine\Build\BatchFiles\RunUAT.bat" EnablePlugin -Project="%PROJECT_PATH%" -Plugin="PixelStreaming"
      displayName: 'Enable Pixel Streaming Plugin'
